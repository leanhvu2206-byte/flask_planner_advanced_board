{% extends "base.html" %}
{% block content %}

<style>
  /* ===== Background gradient + blobs động nhẹ ===== */
  .auth-bg {
    position: fixed; inset: 0; z-index: -1;
    background:
      radial-gradient(900px 500px at -10% 0%, #e8f1ff 0%, transparent 60%),
      radial-gradient(800px 400px at 110% 10%, #eafaf0 0%, transparent 60%),
      linear-gradient(120deg, #f8fbff, #ffffff);
    animation: bgFloat 12s ease-in-out infinite alternate;
  }
  @keyframes bgFloat {
    0% { background-position: 0 0, 0 0, 0 0; }
    100% { background-position: 6% 2%, -3% 5%, 0 0; }
  }
  .blob {
    position: fixed; border-radius: 50%; filter: blur(28px); opacity: .45; z-index: -1;
    animation: move 26s ease-in-out infinite alternate;
  }
  .blob.bl1 { width: 360px; height: 360px; left: -120px; top: 140px; background: #cfe2ff; }
  .blob.bl2 { width: 280px; height: 280px; right: -90px; top: 60px; background: #d1f1e0; animation-duration: 22s; }
  .blob.bl3 { width: 420px; height: 420px; right: 10%; bottom: -140px; background: #ffe7c2; animation-duration: 28s; }
  @keyframes move {
    0% { transform: translate(0,0) scale(1); }
    100% { transform: translate(20px,-12px) scale(1.05); }
  }

  /* ===== Auth card ===== */
  .auth-wrap{min-height: calc(100vh - 130px); display:flex; align-items:center; justify-content:center;}
  .auth-card{
    backdrop-filter: blur(8px);
    border: 1px solid rgba(0,0,0,.06);
    border-radius: 16px;
    box-shadow: 0 10px 40px rgba(0,0,0,.06);
  }
  .brand-mark{display:flex; align-items:center; gap:.6rem}
  .brand-mark i{font-size: 1.6rem;}
  .form-control, .btn{height: 44px}
  .input-group-text{background:#fff}
  .small-muted{font-size:.9rem; color:#6c757d}
</style>

<!-- background -->
<div class="auth-bg"></div>
<div class="blob bl1"></div>
<div class="blob bl2"></div>
<div class="blob bl3"></div>

<div class="auth-wrap">
  <div class="col-11 col-sm-9 col-md-7 col-lg-5 col-xl-4">
    <div class="card auth-card shadow-sm">
      <div class="card-body p-4 p-md-5">
        <!-- brand -->
        <div class="brand-mark mb-3">
          <i class="bi bi-kanban-fill text-warning"></i>
          <div>
            <div class="fw-bold">Project Planner</div>
            <div class="small-muted">Đăng nhập để tiếp tục</div>
          </div>
        </div>

        <form method="post" novalidate>
          <div class="mb-3">
            <label class="form-label">Email</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-envelope"></i></span>
              <input type="email" name="email" class="form-control" placeholder="you@example.com" required>
            </div>
          </div>

          <div class="mb-2">
            <label class="form-label">Mật khẩu</label>
            <div class="input-group" id="pwWrap">
              <span class="input-group-text"><i class="bi bi-shield-lock"></i></span>
              <input type="password" name="password" class="form-control" id="pw" required>
              <button class="btn btn-outline-secondary" type="button" id="togglePw">
                <i class="bi bi-eye-slash" id="pwIcon"></i>
              </button>
            </div>
          </div>

          <div class="d-flex justify-content-between align-items-center mb-4">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="remember">
              <label class="form-check-label small-muted" for="remember">Ghi nhớ đăng nhập</label>
            </div>
            <a class="small-muted text-decoration-none" href="#">Quên mật khẩu?</a>
          </div>

          <button class="btn btn-primary w-100 mb-3" type="submit">
            <i class="bi bi-box-arrow-in-right me-1"></i> Đăng nhập
          </button>

          <div class="text-center small-muted">
            Chưa có tài khoản?
            <a href="{{ url_for('register') }}" class="link-primary text-decoration-none">Đăng ký</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- toggle show/hide password -->
<script>
  (function(){
    const btn = document.getElementById('togglePw');
    const input = document.getElementById('pw');
    const icon = document.getElementById('pwIcon');
    if (!btn || !input) return;
    btn.addEventListener('click', function(){
      const show = input.type === 'password';
      input.type = show ? 'text' : 'password';
      icon.classList.toggle('bi-eye', show);
      icon.classList.toggle('bi-eye-slash', !show);
    });
  })();
</script>

{% endblock %}
